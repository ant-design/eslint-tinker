#! /usr/bin/env node

'use strict';

const path = require('path');
const program = require('commander');
const CLIEngine = require('eslint').CLIEngine;
const version = require('../package').version;
const tinker = require('../lib/tinker');

program
  .version(version)
  .usage('<file> [otherFiles...]')
  .action(function() {
    const eslintrc = process.cwd() + path.sep + '.eslintrc';
    const eslint = new CLIEngine({
      configFile: eslintrc,
      fix: true,
      rules: {
        'eol-last': 0,
      },
    });

    // TODO: use commander instead
    const files = process.argv.slice(2).map(function(file) {
      return path.resolve(file);
    });

    files.forEach(function(file) {
      tinker(file, eslint);
    });
  })
  .parse(process.argv);
